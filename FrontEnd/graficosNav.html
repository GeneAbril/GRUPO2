<!doctype html>
<html lang="es">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="CSS/graficosNav.css">
    <link rel="stylesheet" href="CSS/colores.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Graficos</title>
  </head>
  <body>


    <!-- NAVBAR BOOSTRAP -->
    <nav class="navbar navbar-light bg-dark mb-5 p-4">
      <div class="container">

          <a class="navbar-brand text-white d-flex" href="#">
              <img src="./assets/LogoEcoTank.png" width="50" height="50" class="d-inline-block align-top" alt="">
              <h1 class="ms-3">EcoTank</h1>
          </a>

          <div class="form-inline my-2 my-lg-0">
              <a class="btn btn-outline-success my-2 my-sm-0" href="inicio.html">Iniciar Sesion</a>
          </div>
      </div>
  </nav>
    <div>
    <h1 class="titulo">Nombre Dispositivo</h1>
    <hr>
  </div>

    <!-- Grafico Temperatura -->
    <div class="container w-50 mb-5">
      <canvas id="temperatura"></canvas>
    </div>

    <!-- <div class="container w-25">
      <canvas id="temperaturaDonuts"></canvas>
    </div> -->

    <div class="container w-50">
      <canvas id="humedad"></canvas>
    </div>

    
      <!-- import chart -->
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

      <script>
        // Columnas
        const labels = [
          'Lunes',
          'Martes',
          'Miercoles',
          'Jueves',
          'Viernes',
          'Sabado',
          'domingo',
        ];
        
        //Configuracion del grafico temperatura
        const data = {
          labels: labels,
          datasets: [{
            label: 'Temperatura',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: [0, 10, 5, 2, 20, 30, 45],
          }]
        };
      
        const config = {
          type: 'line',
          data: data,
          options: {}
        };

      // renderizar el chart
        const temperatura = new Chart(
          document.getElementById('temperatura'),
          config
        );

      //Configuracion del grafico humedad  
      const data2 = {
          labels: labels,
          datasets: [{
            label: 'Humedad',
            backgroundColor: 'rgb(8,14,189)',
            borderColor: 'rgb(8,14,189)',
            data: [0, 10, 5, 2, 20, 30, 45],
          }]
        };

        const config2 = {
          type: 'line',
          data: data2,
          options: {}
        };
      // render el chart2
      const humedad = new Chart(
          document.getElementById('humedad'),
          config2
        );


      //Configuracion del grafico humedad
      const datapoints  = [55, 3];//varaible donde se almacenara el dato a mostrar
      const data3 = {
          labels: ['Lunes',''],
          datasets: [{
            label: 'Temperatura donnuts',
            backgroundColor: ['rgb(8,14,189)',
            'transparent'],
            borderColor: ['rgb(8,14,189)', 'transparent'],
            data: datapoints,// aqui van los datos que mostraremos
            //ajustes adicionales
            borderWidth: 1,
            cutout: '95%',
            borderRadius: 5
          }]
        };

        //counter plugin block
        const counter = {
          id: 'counter',
          beforeDraw(chart, args, options) {
            const { ctx, chartArea: { top, right, bottom, left, width, height }} = chart
            ;
            ctx.save();
            //obteniendo la ubicacion del centro para agregar nuestro texto
            const ycenter = (height/2);
            const xcenter =(width/2);
            //Escribir y automatizar texto
            ctx.font = options.fontSize + ' ' + options.fontFamily;
            ctx.textAlign ='center';
            //Asignamos en color de la fuente dentro de opciones en seccion de configuracion del chart
            ctx.fillStyle =options.fontColor;

            ctx.fillText(datapoints[0]+'%', xcenter, ycenter);

            //x0 indica el punto de partida en el eje horizontal i/d
            //y0 indica el punto de partida en el eje vertical a/ab
            //x1 = longitud de la forma en pixeles en el eje horizontal
            //y1 = longitud de la forma en pixeles en el eje vertical
            


          }
        };

        //conficuraciones
        const config3 = {
          type: 'doughnut',
          data: data3,
          options: {
            plugins:{
              legend: {
                display:false
              },
              tooltip: {
                enabled:false //Para ocultar descripcion al dejar mouse encima
              },
              counter:{
                fontColor: 'blue',
                fontSize: '20px',
                fontFamily: 'sans-serif'
              }
            }
          },
          plugins:[counter]
        };
      // render init block chart3
      const temperaturaDonuts = new Chart(
          document.getElementById('temperaturaDonuts'),
          config3
        );

      </script> 
    
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  </body>
</html>
